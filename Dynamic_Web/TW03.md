# TW2

### **Firebase 数据持久化 | Firebase Data Persistence**

1. **Firebase 数据持久化的重要性 | Importance of Firebase Data Persistence**  
   - **中文**：通过 Firebase，可以将用户数据（例如晚餐计划）保存在云端，即使刷新应用、关闭浏览器或更换设备也不会丢失数据。  
   - **English**: Firebase allows you to save user data (e.g., dinner plans) in the cloud, preventing data loss even when the app is refreshed, the browser is closed, or the device is changed.  
   - **中文**：Firebase 支持离线模式，类似 Google Drive，用户重新上线时会与云端同步。  
   - **English**: Firebase supports offline mode, similar to Google Drive, and synchronizes with the cloud when the user goes back online.

---

2. **Firebase 配置与设置 | Firebase Setup and Configuration**  
   - **中文**：实验教程中详细说明了设置方法。配置完成后，可以通过 JavaScript 获取数据库的引用对象。  
   - **English**: The setup process is detailed in the lab guide. Once configured, you can get database references in JavaScript.  
   - **中文**：可以通过 `ref(db, "path")` 获取数据库路径引用，并使用 `child()` 获取子路径引用。  
   - **English**: You can create references using `ref(db, "path")` and retrieve sub-path references with `child()`.

---

3. **主要操作方法 | Key Operations**  
   - **中文**：
     - **`set()`**：将对象保存到 Firebase 中。
     - **`get()`**：从 Firebase 中获取数据，返回一个快照，通过 `snapshot.val()` 提取数据。
     - **`push()`**：创建带唯一键的对象，防止用户间数据冲突（如多人同时发布博客）。  
   - **English**:
     - **`set()`**: Saves an object to Firebase.
     - **`get()`**: Retrieves data from Firebase, returning a snapshot. The data can be accessed via `snapshot.val()`.
     - **`push()`**: Creates an object with a unique key to prevent data conflicts between users (e.g., multiple users posting blogs simultaneously).

---

4. **模型转换与数据保存 | Model Conversion and Persistence**  
   - **中文**：模型不能直接保存，需通过 `modelToPersistence()` 转换，过滤掉非必要属性并规范路径。  
   - **English**: Models cannot be saved directly. Use `modelToPersistence()` to convert them, filter unnecessary properties, and standardize paths.  
   - **中文**：读取时使用 `persistenceToModel()`，解决 ID 和默认值等问题。  
   - **English**: Use `persistenceToModel()` during retrieval to resolve issues like IDs and default values.

---

5. **实时同步功能 | Real-Time Synchronization**  
   - **中文**：使用 `onValue()` 订阅 Firebase 数据的变化，实现实时更新功能，例如多窗口间数据同步。  
   - **English**: Use `onValue()` to subscribe to Firebase data changes for real-time updates, such as synchronizing data across multiple windows.  
   - **中文**：可结合 `childAdded()` 和 `childRemoved()` 监听子对象的增删事件，从而优化性能。  
   - **English**: Combine with `childAdded()` and `childRemoved()` to monitor addition or removal of sub-objects, improving performance.


